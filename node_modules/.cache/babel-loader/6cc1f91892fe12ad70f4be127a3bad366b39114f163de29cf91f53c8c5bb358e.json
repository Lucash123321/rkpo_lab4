{"ast":null,"code":"import React,{useState,useEffect}from'react';import TodoItemDnd from'../components/TodoItemDnd';import SwitchButton from'../components/SwitchButton';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DndPage(){const[task,setTask]=useState('');const[columns,setColumns]=useState({todo:{name:'todo',items:[{id:'1',text:'First task'},{id:'2',text:'Second task'}]},inProgress:{name:'inProgress',items:[]},done:{name:'done',items:[]}});const handleAddTask=()=>{if(!task)return;const newTaskItem={id:Date.now(),text:task};const newTodoItems=[...columns.todo.items,newTaskItem];setColumns({...columns,todo:{...columns.todo,items:newTodoItems}});setTask(\"\");};const onDragEnd=result=>{const{source,destination}=result;if(!destination)return;const sourceColumn=columns[source.droppableId];const destColumn=columns[destination.droppableId];const sourceItems=[...sourceColumn.items];const destItems=[...destColumn.items];const[removed]=sourceItems.splice(source.index,1);if(source.droppableId===destination.droppableId){sourceItems.splice(destination.index,0,removed);setColumns({...columns,[source.droppableId]:{...sourceColumn,items:sourceItems}});}else{destItems.splice(destination.index,0,removed);setColumns({...columns,[source.droppableId]:{...sourceColumn,items:sourceItems},[destination.droppableId]:{...destColumn,items:destItems}});}};// useEffect(() => {\n//   console.log(columns);\n// }, [columns]);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"To-Do List\"}),/*#__PURE__*/_jsx(SwitchButton,{path:\"/\"}),/*#__PURE__*/_jsx(\"div\",{className:\"task-input\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleAddTask();},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:task,onChange:e=>setTask(e.target.value),placeholder:\"Add a new task\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddTask,children:\"Add\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"columns\",children:/*#__PURE__*/_jsxs(DragDropContext,{onDragEnd:onDragEnd,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"column\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"To Do\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"todo\",children:provided=>/*#__PURE__*/_jsxs(\"ul\",{...provided.droppableProps,ref:provided.innerRef,children:[columns.todo.items.map((task,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:task.text,index:index,children:provided=>/*#__PURE__*/_jsx(\"div\",{ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,children:/*#__PURE__*/_jsx(TodoItemDnd,{task:task,index:index,columns:columns,setColumns:setColumns,columnName:\"todo\"})})},task.text)),provided.placeholder]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"inProgress\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"inProgress\",children:provided=>/*#__PURE__*/_jsxs(\"ul\",{...provided.droppableProps,ref:provided.innerRef,children:[columns.inProgress.items.map((task,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:task.text,index:index,children:provided=>/*#__PURE__*/_jsx(\"div\",{ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,children:/*#__PURE__*/_jsx(TodoItemDnd,{task:task,index:index,columns:columns,setColumns:setColumns,columnName:\"inProgress\"})})},task.text)),provided.placeholder]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Done\"}),/*#__PURE__*/_jsx(Droppable,{droppableId:\"done\",children:provided=>/*#__PURE__*/_jsxs(\"ul\",{...provided.droppableProps,ref:provided.innerRef,children:[columns.done.items.map((task,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:task.text,index:index,children:provided=>/*#__PURE__*/_jsx(\"div\",{ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps,children:/*#__PURE__*/_jsx(TodoItemDnd,{task:task,index:index,columns:columns,setColumns:setColumns,columnName:\"done\"})})},task.text)),provided.placeholder]})})]})]})})]});}export default DndPage;","map":{"version":3,"names":["React","useState","useEffect","TodoItemDnd","SwitchButton","DragDropContext","Droppable","Draggable","jsx","_jsx","jsxs","_jsxs","DndPage","task","setTask","columns","setColumns","todo","name","items","id","text","inProgress","done","handleAddTask","newTaskItem","Date","now","newTodoItems","onDragEnd","result","source","destination","sourceColumn","droppableId","destColumn","sourceItems","destItems","removed","splice","index","className","children","path","onSubmit","e","preventDefault","type","value","onChange","target","placeholder","onClick","provided","droppableProps","ref","innerRef","map","draggableId","draggableProps","dragHandleProps","columnName"],"sources":["C:/Users/Maxim/Dropbox/Конспекты/РКПО/Лабы/Лаба4/todo/src/pages/DndPage.js"],"sourcesContent":["import React, { useState, useEffect  } from 'react';\r\nimport TodoItemDnd from '../components/TodoItemDnd';\r\nimport SwitchButton from '../components/SwitchButton';\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\n\r\nfunction DndPage() {\r\n  const [task, setTask] = useState('');\r\n  const [columns, setColumns] = useState({\r\n    todo: {\r\n      name: 'todo',\r\n      items: [\r\n      { id: '1', text: 'First task' },\r\n      { id: '2', text: 'Second task' },\r\n      ],\r\n    },\r\n    inProgress: {\r\n      name: 'inProgress',\r\n      items: [],\r\n    },\r\n    done: {\r\n      name: 'done',\r\n      items: [],\r\n    },\r\n    });\r\n\r\n\r\n  const handleAddTask = () => {\r\n    if (!task) return; \r\n\r\n    const newTaskItem = {\r\n      id: Date.now(),\r\n      text: task,\r\n      };\r\n\r\n\r\n    const newTodoItems = [...columns.todo.items, newTaskItem]\r\n\r\n    setColumns({\r\n      ...columns,\r\n      todo: {\r\n        ...columns.todo,\r\n        items: newTodoItems\r\n      }\r\n\r\n    });\r\n\r\n    setTask(\"\");\r\n  };\r\n\r\n  const onDragEnd = (result) => {\r\n    const { source, destination } = result;\r\n    if (!destination) return;\r\n    const sourceColumn = columns[source.droppableId];\r\n    const destColumn = columns[destination.droppableId];\r\n    const sourceItems = [...sourceColumn.items];\r\n    const destItems = [...destColumn.items];\r\n    const [removed] = sourceItems.splice(source.index, 1);\r\n\r\n    if (source.droppableId === destination.droppableId) {\r\n      sourceItems.splice(destination.index, 0, removed);\r\n      setColumns({\r\n        ...columns,\r\n        [source.droppableId]: {\r\n          ...sourceColumn,\r\n          items: sourceItems,\r\n        },\r\n      });\r\n\r\n    } else {\r\n      destItems.splice(destination.index, 0, removed);\r\n      setColumns({\r\n        ...columns,\r\n        [source.droppableId]: {\r\n          ...sourceColumn,\r\n          items: sourceItems,\r\n        },\r\n        [destination.droppableId]: {\r\n          ...destColumn,\r\n          items: destItems,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   console.log(columns);\r\n  // }, [columns]);\r\n  \r\n  return (\r\n    <div className='App'>\r\n    <h1>To-Do List</h1>\r\n      <SwitchButton path=\"/\"/>\r\n      <div className=\"task-input\">\r\n        <form onSubmit={(e) => {e.preventDefault(); handleAddTask();}}>\r\n          <input\r\n            type=\"text\"\r\n            value={task}\r\n            onChange={(e) => setTask(e.target.value)}\r\n            placeholder=\"Add a new task\"\r\n          />\r\n          <button onClick={handleAddTask}>Add</button>\r\n        </form>\r\n      </div>\r\n         <div className=\"columns\">\r\n         <DragDropContext onDragEnd={onDragEnd}>\r\n           <div className=\"column\">\r\n             <h2>To Do</h2>\r\n             <Droppable droppableId=\"todo\">\r\n               {(provided) => (\r\n                <ul {...provided.droppableProps} ref={provided.innerRef}>\r\n                  {columns.todo.items.map((task, index) => (\r\n                    <Draggable key={task.text} draggableId={task.text} index={index}>\r\n                      {(provided) => (\r\n                        <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\r\n                          <TodoItemDnd task={task} index={index} columns={columns} setColumns={setColumns} columnName={\"todo\"}/>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </ul>\r\n              )}\r\n            </Droppable>\r\n          </div>\r\n\r\n          <div className=\"column\">\r\n            <h2>inProgress</h2>\r\n            <Droppable droppableId=\"inProgress\">\r\n              {(provided) => (\r\n                <ul {...provided.droppableProps} ref={provided.innerRef}>\r\n                  {columns.inProgress.items.map((task, index) => (\r\n                    <Draggable key={task.text} draggableId={task.text} index={index}>\r\n                      {(provided) => (\r\n                        <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\r\n                          <TodoItemDnd task={task} index={index} columns={columns} setColumns={setColumns} columnName={\"inProgress\"}/>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </ul>\r\n              )}\r\n            </Droppable>\r\n          </div>\r\n\r\n          <div className=\"column\">\r\n            <h2>Done</h2>\r\n            <Droppable droppableId=\"done\">\r\n              {(provided) => (\r\n                <ul {...provided.droppableProps} ref={provided.innerRef}>\r\n                  {columns.done.items.map((task, index) => (\r\n                    <Draggable key={task.text} draggableId={task.text} index={index}>\r\n                      {(provided) => (\r\n                        <div ref={provided.innerRef} {...provided.draggableProps} {...provided.dragHandleProps}>\r\n                          <TodoItemDnd task={task} index={index} columns={columns} setColumns={setColumns} columnName={\"done\"}/>\r\n                        </div>\r\n                      )}\r\n                    </Draggable>\r\n                  ))}\r\n                  {provided.placeholder}\r\n                </ul>\r\n              )}\r\n            </Droppable>\r\n          </div>\r\n        </DragDropContext>\r\n      </div>\r\n    </div>\r\n    );\r\n}\r\n\r\nexport default DndPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}